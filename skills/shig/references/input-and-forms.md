# 入力・フォーム設計 リファレンス

SHIG の入力とフォーム設計に関する原則をまとめたリファレンス。
各原則の詳細は公式サイトを参照すること。

> **出典**: 以下の原則名は、ソシオメディア株式会社
> 「[ヒューマンインターフェース ガイドライン](https://www.sociomedia.co.jp/category/shig)」
> （© Sociomedia, Inc.）より引用。

---

## 対象原則一覧

| # | 原則名（出典: SHIG） | URL |
|---|--------|-----|
| 38 | ユーザーが入力したものはユーザーのもの | https://www.sociomedia.co.jp/9398 |
| 39 | 整合性を損なうような操作をユーザーに求めない | https://www.sociomedia.co.jp/9408 |
| 40 | 入力フォームにはストーリー性を持たせる | https://www.sociomedia.co.jp/9421 |
| 41 | 操作の流れを作る | https://www.sociomedia.co.jp/9429 |
| 42 | よいデフォルト | https://www.sociomedia.co.jp/9434 |
| 43 | 制限コントロールを活用する | https://www.sociomedia.co.jp/9446 |
| 44 | 選択肢の文言は肯定文にする | https://www.sociomedia.co.jp/9456 |
| 45 | 値を入力させるのではなく結果を選ばせる | https://www.sociomedia.co.jp/9464 |
| 46 | 入力欄を構造化する | https://www.sociomedia.co.jp/9470 |
| 47 | デフォルトボタンには具体的な動詞を用いる | https://www.sociomedia.co.jp/9486 |
| 48 | ラジオボタンは単数選択、チェックボックスはオンオフ | https://www.sociomedia.co.jp/9492 |
| 49 | フリップフロップ問題を避ける | https://www.sociomedia.co.jp/9502 |
| 50 | ユーザーに厳密さを求めない | https://www.sociomedia.co.jp/9511 |
| 51 | 入力サジェスチョンを提示する | https://www.sociomedia.co.jp/9515 |

---

## 実装への適用ノート

### フォームのストーリー設計

入力フォームにはストーリー性を持たせる（#40）。フィールドの並び順は、ユーザーの思考の自然な流れに沿わせる。

**フィールド順序の決め方**:

| 原則 | 説明 | 例 |
|------|------|-----|
| 大きな概念から詳細へ | 抽象→具体の順で並べる | カテゴリ → サブカテゴリ → 詳細 |
| 時系列に沿う | 出来事の順番で並べる | 開始日 → 終了日 → 繰り返し設定 |
| 重要度の高い項目を先に | ユーザーが最も関心のある項目から | タイトル → 説明 → タグ → 公開設定 |
| 関連項目をグルーピング | 意味的に関連する項目を近接配置 | 「住所」グループ（都道府県 → 市区町村 → 番地） |
| 必須項目を先に | 必須 → 任意の順で並べる | 名前 → メール → 電話（任意） |

**アンチパターン**:

- データベースのカラム順でフィールドを並べる
- 技術的な都合でグルーピングする（ユーザー視点でない）
- 長いフォームを分割せず一画面に表示する

---

### 制限コントロールの使い分け

制限コントロール（#43）を活用して、ユーザーの入力ミスを構造的に防ぐ。

| コントロール | 使用場面 | 選択肢の数 |
|------------|---------|-----------|
| ラジオボタン | 排他選択、選択肢が少ない、全体を一覧したい | 2〜5 |
| セレクトメニュー | 排他選択、スペースが限られる | 5〜15 |
| 検索可能セレクト | 排他選択、選択肢が多い | 15以上 |
| チェックボックス（単体） | オン/オフの切り替え | — |
| チェックボックス（複数） | 複数選択可能 | 2〜7 |
| トグルスイッチ | 即時に効果が反映される設定 | — |
| スライダー | 範囲内の連続値 | — |
| 日付ピッカー | 日付の入力 | — |
| ステッパー（+/−） | 少量の数値調整 | — |

**判断フローチャート**:

```
入力値は自由テキストか？
├─ Yes → テキスト入力（ただし #50 厳密さを求めない）
└─ No → 選択肢は何個か？
    ├─ 2個（オン/オフ） → トグルスイッチ or チェックボックス
    ├─ 2〜5個（排他） → ラジオボタン
    ├─ 2〜7個（複数可） → チェックボックスグループ
    ├─ 5〜15個（排他） → セレクトメニュー
    └─ 15個以上 → 検索可能セレクト or オートコンプリート
```

**ラジオボタン vs チェックボックスの正しい使い分け**（#48）:

| コントロール | 意味 | 初期状態 |
|------------|------|---------|
| ラジオボタン | N個の中から1つ選ぶ | 必ず1つが選択済み |
| チェックボックス | 各項目を個別にオン/オフ | オフが初期状態でもよい |

---

### よいデフォルト値の選び方

よいデフォルト（#42）は、ユーザーの入力を最小限にしつつ、間違った値を設定するリスクも避ける。

**デフォルト値の選定基準**:

| 基準 | 方法 | 例 |
|------|------|-----|
| 最も多い選択 | 統計・分析データから決定 | 国の選択 → ユーザーの所在国 |
| 安全な値 | リスクの低い選択肢 | 公開設定 → 「非公開」 |
| 前回の値 | ユーザーの過去の入力を記憶 | 通貨 → 前回使用した通貨 |
| スマートデフォルト | コンテキストから推測 | 日付 → 今日の日付 |
| 空（意図的） | ユーザーに考えさせたい場合 | タイトル → 空（重要な入力） |

**注意点**:

- デフォルト値が「ほぼ正しい」場合、ユーザーは確認せずに進むことがある。安全側に倒す
- 破壊的な操作のデフォルトは常に安全な側にする（例：「削除しない」がデフォルト）
- 値を入力させるのではなく結果を選ばせる（#45）：日時入力で「明日」「来週」などのプリセットを提供する

---

### フリップフロップ問題の回避方法

フリップフロップ問題（#49）：同じボタンが操作と状態表示を兼ねてしまい、ユーザーが混乱する問題。

**問題の例**:

```
┌──────────┐
│  ミュート  │  ← これは「ミュートする」ボタンか？
└──────────┘     「ミュート中」の表示か？
```

**回避パターン**:

| パターン | 実装 | 例 |
|---------|------|-----|
| 状態 + アクションを分離 | 状態ラベル + 変更ボタン | 「公開中」 [非公開にする] |
| アイコン + テキストの併用 | アイコンが状態、テキストがアクション | 🔔 [通知をオフにする] |
| トグルスイッチ | 視覚的にオン/オフが明確 | ━━●（オン） / ●━━（オフ） |
| 選択肢の文言を肯定文にする（#44） | 否定形を避ける | ❌「通知を無効にしない」→ ✓「通知を受け取る」 |

**チェックボックスのラベル規則**:

- チェックボックスのラベルは常に肯定文にする（#44）
- ❌「メールを送信しない」→ ✓「メールを受信する」
- ユーザーは「チェック＝有効」と直感的に理解する

---

### 入力に関するその他の設計判断

**入力データの保護**（#38）:

- バリデーションエラー時にフォームをリセットしない
- ブラウザバックで入力内容が消えないようにする
- セッション切れ時に入力内容を自動保存する
- 長文テキストは定期的に自動保存する

**入力欄の構造化**（#46）:

- 電話番号、クレジットカード番号などは区切りを自動挿入する
- 郵便番号から住所を自動補完する
- 入力欄のサイズで期待される入力量を示す（短い入力には小さい入力欄）

**サジェスチョン**（#51）:

- 入力途中でオートコンプリート候補を表示する
- 過去の入力履歴から候補を提示する
- 検索欄ではよく使われるキーワードをサジェストする

**ユーザーに厳密さを求めない**（#50）:

- 電話番号のハイフン有無を許容する
- 全角/半角を自動変換する
- 大文字/小文字を区別しない（検索、メールアドレス等）
- 日付の入力形式を柔軟に受け付ける

---

## 関連リファレンス

- [interaction.md](interaction.md) — インタラクション設計（エラー回避、フェールセーフ）
- [presentation.md](presentation.md) — フィードバック・レイアウト
- [design-principles.md](design-principles.md) — 認知心理学（ヒックの法則等）
