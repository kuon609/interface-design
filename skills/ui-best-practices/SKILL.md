---
name: ui-best-practices
description: >-
  Webアプリケーションのインターフェースを実装する際に、UIベストプラクティスを適用しアンチパターンを
  検出する。コンポーネント、ダッシュボード、管理画面、SaaS UI、フォーム、データテーブル、
  モーダル、その他ユーザーに見えるWeb UIを実装するときに使用する。
  視覚的な一貫性、コンポーネント状態の完全性、適切なUXパターンを保証し、
  よくある設計ミスやダークパターンを防ぐ。
---

# UI ベストプラクティス

Webアプリケーションの UI を実装する際は、常にこの原則を適用すること。
このスキルは RAMS（アクセシビリティ）や frontend-design（美的デザイン）を補完する。
ここで扱うのは **UXパターン・視覚的一貫性・アンチパターンの回避** に焦点を当てる。

## 実装前の必須確認

インタラクティブな UI を書く前に、以下の問いに答えること：

1. **状態**: このコンポーネントは全ての状態でどう見えるか？（ローディング、空、エラー、無効化）
2. **フィードバック**: ユーザーは操作が成功したことをどう知るか？
3. **階層**: この画面で最も重要な要素は何か？
4. **一貫性**: スペーシング・カラー・サイズは確立済みのシステムに従っているか？

---

## スペーシングシステム

一貫したスペーシングスケールを必ず使うこと。`7px`、`13px`、`23px` のような任意の値は使わない。

**Base-8 スケール**（この値のみ使用すること）：
`4 · 8 · 12 · 16 · 20 · 24 · 32 · 40 · 48 · 64 · 80 · 96`

Tailwind の場合：組み込みスケールのみ使用（`p-1`、`p-2`、`gap-4` など）。
CSS の場合：カスタムプロパティで定義（`--space-xs: 4px`、`--space-sm: 8px`、…）。

**グルーピングの法則**：関連要素は小さなギャップ、セクション間は大きなギャップ。

---

## 視覚的階層

全ての画面は明確な読み順を持たなければならない。以下で実現する：

- **サイズ**: 最大のテキスト＝最重要
- **ウェイト**: 太字が細字より先に目を引く
- **カラーコントラスト**: 高コントラスト＝プライマリ、ミュート＝セカンダリ
- **スペーシング**: 周囲の余白が多い＝重要

一度に表示するテキスト階層は最大 3 レベル。それ以上必要な場合はプログレッシブディスクロージャーを使う。

1 画面につきプライマリアクションは 1 つ。セカンダリアクションは視覚的に従属させること。

---

## コンポーネント状態（必須）

インタラクティブな要素はすべて、**該当する全ての状態**を実装すること：

| 状態 | タイミング | 視覚的サイン |
|------|-----------|------------|
| デフォルト | 静止時 | 通常の外観 |
| ホバー | マウスオーバー | 背景やカラーの微妙な変化、`cursor: pointer` |
| フォーカス | キーボード/タブ | 可視のフォーカスリング（代替なしの `outline: none` は絶対禁止） |
| アクティブ | クリック中 | 瞬間的な視覚フィードバック |
| 無効化 | 操作不可時 | ミュート外観、`cursor: not-allowed`、ホバー効果なし |
| ローディング | 非同期処理中 | スピナーまたはスケルトン、二重送信防止 |
| エラー | 操作失敗時 | エラーカラー、アイコン、メッセージ |
| 成功 | 操作完了時 | サクセスカラー、アイコン、またはトースト |

ローディング・空・エラー状態のパターンは [references/states.md](references/states.md) を参照。

---

## カラーセマンティクス

セマンティックなカラーロールを使うこと。その場限りのカラーは作らない：

| ロール | 用途 |
|-------|------|
| Primary | メインアクション、ブランド |
| Secondary | サポートアクション |
| Destructive | 削除、取り消し、不可逆な操作 |
| Success | 完了、確認 |
| Warning | 注意、回復可能な問題 |
| Danger/Error | 失敗状態、バリデーションエラー |
| Muted | 無効化、セカンダリテキスト、プレースホルダー |

**カラーを唯一の区別手段にしない**（アイコンやテキストラベルと必ず組み合わせる）。

---

## フォーム

- すべての入力欄に**可視ラベル**を付ける（プレースホルダーのみは不可―タイプすると消える）
- バリデーションは**フォーカスを外したとき**に行う（タイプ中ではなく、送信時だけでもない）
- エラーは**インライン**で表示する―モーダルで表示しない
- フィールドの順序はユーザーのメンタルモデルに合わせる
- 基本は 1 カラムレイアウト
- マルチステップフォーム：進捗表示、ステップ間のデータ保持
- バリデーションエラー時にフォームをリセットしない

---

## アンチパターンチェックリスト

リリース前に必ず確認すること。詳細は [references/antipatterns.md](references/antipatterns.md) を参照。

**即座に修正すべき問題：**
- [ ] インタラクティブな要素にホバー/フォーカス/アクティブ状態がない
- [ ] 非同期処理にローディング状態がない
- [ ] 空状態が単なる空白（メッセージもアクションもない）
- [ ] エラーメッセージが「Something went wrong」で回復方法が不明
- [ ] 何が足りないか説明なしに送信ボタンが無効化されている
- [ ] アイコンのみのボタン/リンクに `aria-label` もツールチップもない
- [ ] 不可逆な操作に確認ステップがない
- [ ] Escape キーまたは背景クリックで閉じられないモーダル

**設計上の危険信号：**
- [ ] 8px スケール外のスペーシング値
- [ ] カラーのみで状態を区別している
- [ ] 一度に 3 レベル以上のテキスト階層が表示されている
- [ ] タッチデバイスで使われる可能性のある画面にホバー専用のコンテンツがある

---

## 参照ファイル

- [references/visual-design.md](references/visual-design.md) — スペーシング・カラー・タイポグラフィ・レイアウト
- [references/states.md](references/states.md) — ローディング・空・エラー・フィードバックパターン
- [references/ux-patterns.md](references/ux-patterns.md) — アフォーダンス・フォーム・ナビゲーション・モーダル
- [references/antipatterns.md](references/antipatterns.md) — ダークパターン・UXミス・視覚的混乱
