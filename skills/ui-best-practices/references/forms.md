# フォーム設計 リファレンス

## ラベルの配置

入力欄の上に**可視ラベル**を置くこと（プレースホルダーをラベル代わりに使わない）。

```
✓  メールアドレス           ❌  [john@example.com]
   [john@example.com]          ← タイプすると消える
```

フローティングラベルは正しく実装すれば許容範囲内（常に表示され、フォーカス時だけでない）。

---

## バリデーション

### タイミング

| いつ行うか | ルール |
|----------|-------|
| **フォーカスを外したとき（blur）** | 初回 — ユーザーがフィールドを離れたとき |
| **変更時（最初の blur 後）** | リアルタイムフィードバックのためにタイプに応じて更新 |
| **送信時** | 最終チェック、最初のエラーにスクロール |
| **タイプ中（最初の blur 前）は行わない** | 鬱陶しく、時期尚早 |

### エラーの表示

- エラーは**インライン**で表示する — modal で表示しない
- フィールドの直下に表示（上や右側は不可）
- エラーカラー + アイコン（カラーのみは不可）
- フィールドごとに具体的なメッセージ — 汎用テキストの使い回しは不可
- ユーザーが修正を始めたらクリアする

### エラー回復

- 送信時は最初のエラーにスクロール
- 最初のエラーフィールドにフォーカスを移す
- ユーザーが入力した値をすべて保持する（フォームをクリアしない）
- ユーザーが修正を始めたらフィールドのエラーをクリアする（change 時）
- バリデーションエラー時にフォームをリセットしない

---

## フィールドレイアウト

- すべての入力欄に**可視ラベル**を付ける（プレースホルダーのみは不可 — タイプすると消える）
- 多くのフォームは**シングルカラム**（スキャンしやすい）
- **隣接する 2 カラム**は次の場合のみ：姓名、都道府県/市区町村/郵便番号
- **論理的な順序**：ユーザーのメンタルモデルに合わせる（データベースのスキーマではない）
- 関連するフィールドは視覚的な近さでグループ化する
- 基本は 1 カラムレイアウト

---

## マルチステップフォーム

- ステップインジケーターを表示（ステップ 2/4）
- 各ステップで進捗を保存（戻ってもデータが失われない）
- 最終ステップ：送信前のサマリー
- 成功状態：明確な完了確認

---

## 長いフォームの保護

- 下書きを自動保存する（特にリッチテキスト/長いフォームの場合）
- 未保存の変更がある場合に離脱前に警告：「未保存の変更があります。このページを離れますか？」
- セッション切れやネットワーク切断で入力データが失われない設計にする
